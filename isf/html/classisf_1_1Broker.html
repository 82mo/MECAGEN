<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Iterative Simulation Framework: isf::Broker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Iterative Simulation Framework
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceisf.html">isf</a></li><li class="navelem"><a class="el" href="classisf_1_1Broker.html">Broker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classisf_1_1Broker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">isf::Broker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Class.  
 <a href="classisf_1_1Broker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="broker_8hpp_source.html">broker.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for isf::Broker:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker__coll__graph.png" border="0" usemap="#isf_1_1Broker_coll__map" alt="Collaboration graph"/></div>
<map name="isf_1_1Broker_coll__map" id="isf_1_1Broker_coll__map">
<area shape="rect" id="node18" href="classisf_1_1Event.html" title="isf::Event\&lt; isf::Broker \&gt;" alt="" coords="460,391,623,417"/><area shape="rect" id="node2" href="classisf_1_1BrokerConfig.html" title="BrokerConfig class. " alt="" coords="1624,168,1744,195"/><area shape="rect" id="node4" href="classisf_1_1Consumer.html" title="The Consumer Class. " alt="" coords="1091,72,1195,99"/><area shape="rect" id="node7" href="classisf_1_1Event.html" title="isf::Event\&lt; isf::Consumer \&gt;" alt="" coords="1317,19,1501,45"/><area shape="rect" id="node5" href="classisf_1_1EventManager.html" title="isf::EventManager\&lt;\l isf::Consumer \&gt;" alt="" coords="1832,158,1968,199"/><area shape="rect" id="node8" href="classisf_1_1ConditionVariable.html" title="isf::ConditionVariable" alt="" coords="753,271,900,297"/><area shape="rect" id="node16" href="classisf_1_1EventManager.html" title="isf::EventManager\&lt;\l isf::Broker \&gt;" alt="" coords="1075,346,1211,387"/><area shape="rect" id="node9" href="classisf_1_1Mutex.html" title="isf::Mutex" alt="" coords="787,456,867,483"/><area shape="rect" id="node10" href="classisf_1_1Uncopyable.html" title="isf::Uncopyable" alt="" coords="485,456,598,483"/><area shape="rect" id="node12" href="classisf_1_1ConsumerConfig.html" title="ConsumerConfig class. " alt="" coords="755,33,898,60"/><area shape="rect" id="node14" href="classisf_1_1ProducerFactory.html" title="ProducerFactory class. " alt="" coords="6,100,146,127"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8171e83c7af7bb817473733c536cc6f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a8171e83c7af7bb817473733c536cc6f6">Broker</a> (<a class="el" href="classisf_1_1BrokerConfig.html">BrokerConfig</a> conf, size_t allocationSize, <a class="el" href="classisf_1_1ProducerFactory.html">ProducerFactory</a> *brid)</td></tr>
<tr class="memdesc:a8171e83c7af7bb817473733c536cc6f6"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Constructor.  <a href="#a8171e83c7af7bb817473733c536cc6f6">More...</a><br/></td></tr>
<tr class="separator:a8171e83c7af7bb817473733c536cc6f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798861d4b3472273e961e199dcd62cd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a798861d4b3472273e961e199dcd62cd3">~Broker</a> ()  throw ()</td></tr>
<tr class="memdesc:a798861d4b3472273e961e199dcd62cd3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Destructor.  <a href="#a798861d4b3472273e961e199dcd62cd3">More...</a><br/></td></tr>
<tr class="separator:a798861d4b3472273e961e199dcd62cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae79fea929f37a567da7bb1897ea0a13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#aae79fea929f37a567da7bb1897ea0a13">releaseBuffer</a> ()</td></tr>
<tr class="memdesc:aae79fea929f37a567da7bb1897ea0a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a class="el" href="classisf_1_1Event.html" title="Event class. ">Event</a> in the broker's eventmanager which calls the void <a class="el" href="classisf_1_1Broker.html#aa3d5258e46e29785d114b0f7f9b2963e" title="Decrement the notificationCounter by one. ">doReleaseBuffer()</a> internal method.  <a href="#aae79fea929f37a567da7bb1897ea0a13">More...</a><br/></td></tr>
<tr class="separator:aae79fea929f37a567da7bb1897ea0a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ffacd36660e79a915aa1abbd11246c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a2ffacd36660e79a915aa1abbd11246c7">swapBuffers</a> (int step)</td></tr>
<tr class="memdesc:a2ffacd36660e79a915aa1abbd11246c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exchange the both swapping buffers' pointers.  <a href="#a2ffacd36660e79a915aa1abbd11246c7">More...</a><br/></td></tr>
<tr class="separator:a2ffacd36660e79a915aa1abbd11246c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4341d8977b4c2d2ad34bf4fb6ce2ccb8"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a4341d8977b4c2d2ad34bf4fb6ce2ccb8">getProducerBuffer</a> ()</td></tr>
<tr class="memdesc:a4341d8977b4c2d2ad34bf4fb6ce2ccb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the pointer pointing to the buffer instance accessible by the producer for writing.  <a href="#a4341d8977b4c2d2ad34bf4fb6ce2ccb8">More...</a><br/></td></tr>
<tr class="separator:a4341d8977b4c2d2ad34bf4fb6ce2ccb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a340374545dda6cc005a1fd06c00722"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a0a340374545dda6cc005a1fd06c00722">getConsumerBuffer</a> ()</td></tr>
<tr class="memdesc:a0a340374545dda6cc005a1fd06c00722"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the pointer pointing to the buffer instance accessible by the consumer for reading.  <a href="#a0a340374545dda6cc005a1fd06c00722">More...</a><br/></td></tr>
<tr class="separator:a0a340374545dda6cc005a1fd06c00722"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa3d5258e46e29785d114b0f7f9b2963e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#aa3d5258e46e29785d114b0f7f9b2963e">doReleaseBuffer</a> ()</td></tr>
<tr class="memdesc:aa3d5258e46e29785d114b0f7f9b2963e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrement the notificationCounter by one.  <a href="#aa3d5258e46e29785d114b0f7f9b2963e">More...</a><br/></td></tr>
<tr class="separator:aa3d5258e46e29785d114b0f7f9b2963e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e61671de6730a9274372ab3f9836f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a27e61671de6730a9274372ab3f9836f8">doAllocation</a> (size_t size)</td></tr>
<tr class="memdesc:a27e61671de6730a9274372ab3f9836f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the memory of the two broker's buffers.  <a href="#a27e61671de6730a9274372ab3f9836f8">More...</a><br/></td></tr>
<tr class="separator:a27e61671de6730a9274372ab3f9836f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f4602af66d94c23929fa8c3ec86ce2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#ac5f4602af66d94c23929fa8c3ec86ce2">notifyConsumers</a> (int step)</td></tr>
<tr class="memdesc:ac5f4602af66d94c23929fa8c3ec86ce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the consumers' public method "notify" when the swap have been executed.  <a href="#ac5f4602af66d94c23929fa8c3ec86ce2">More...</a><br/></td></tr>
<tr class="separator:ac5f4602af66d94c23929fa8c3ec86ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acbed060bef8fdcc2995df92145b4f543"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classisf_1_1BrokerConfig.html">BrokerConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#acbed060bef8fdcc2995df92145b4f543">brokerConfig</a></td></tr>
<tr class="memdesc:acbed060bef8fdcc2995df92145b4f543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is used to store the map between Consumers' pointers and their period of action.  <a href="#acbed060bef8fdcc2995df92145b4f543">More...</a><br/></td></tr>
<tr class="separator:acbed060bef8fdcc2995df92145b4f543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514d54cba8913b93755206cc5cfbeb16"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a514d54cba8913b93755206cc5cfbeb16">notificationCounter</a></td></tr>
<tr class="memdesc:a514d54cba8913b93755206cc5cfbeb16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is used to store the current number of consumers that have not finished to process their data.  <a href="#a514d54cba8913b93755206cc5cfbeb16">More...</a><br/></td></tr>
<tr class="separator:a514d54cba8913b93755206cc5cfbeb16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b14c66e7b6c15cd54e7028fa371094"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classisf_1_1EventManager.html">EventManager</a>&lt; <a class="el" href="classisf_1_1Broker.html">Broker</a> &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#ab3b14c66e7b6c15cd54e7028fa371094">em</a></td></tr>
<tr class="memdesc:ab3b14c66e7b6c15cd54e7028fa371094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is used to store the Events send by the consumer thread via the broker API.  <a href="#ab3b14c66e7b6c15cd54e7028fa371094">More...</a><br/></td></tr>
<tr class="separator:ab3b14c66e7b6c15cd54e7028fa371094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9cc2ed9f10d2c27d74938eca7ce11fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classisf_1_1ProducerFactory.html">ProducerFactory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#ad9cc2ed9f10d2c27d74938eca7ce11fe">brokerID</a></td></tr>
<tr class="memdesc:ad9cc2ed9f10d2c27d74938eca7ce11fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is used to store the ID of the broker.  <a href="#ad9cc2ed9f10d2c27d74938eca7ce11fe">More...</a><br/></td></tr>
<tr class="separator:ad9cc2ed9f10d2c27d74938eca7ce11fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a1ab87eaab41d40a69940a46a904268"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#a5a1ab87eaab41d40a69940a46a904268">producerBuffer</a></td></tr>
<tr class="separator:a5a1ab87eaab41d40a69940a46a904268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae035dc414c5afc31ef9f21b626540228"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classisf_1_1Broker.html#ae035dc414c5afc31ef9f21b626540228">consumerBuffer</a></td></tr>
<tr class="separator:ae035dc414c5afc31ef9f21b626540228"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Class. </p>
<p>The <a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> is an intermediary module which is used to transfer data from a single <a class="el" href="classisf_1_1Producer.html" title="The Producer Class. ">Producer</a> module to any enquiring <a class="el" href="classisf_1_1Consumer.html" title="The Consumer Class. ">Consumer</a> modules (it allows transfers between N producers and M consumers). It contains a customizable double swapping buffer and an <a class="el" href="classisf_1_1EventManager.html" title="EventManager class. ">EventManager</a> which receives notification from the consumers. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8171e83c7af7bb817473733c536cc6f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isf::Broker::Broker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classisf_1_1BrokerConfig.html">BrokerConfig</a>&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>allocationSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classisf_1_1ProducerFactory.html">ProducerFactory</a> *&#160;</td>
          <td class="paramname"><em>brid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Constructor. </p>
<p>The constructor is public as it used by <a class="el" href="classisf_1_1Controller__Impl.html" title="The Controller_Impl Class. ">Controller_Impl</a> in SetConsumers, but it shall remain hidden from the client code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>The std::map containing the consumers pointers as key and their set of period of notification as values (std::set&lt;int&gt;). It should be noted that the <a class="el" href="classisf_1_1Controller__Impl.html" title="The Controller_Impl Class. ">Controller_Impl</a> passes the whole list of Consumers specified by the client, and not the specific list associated by the constructed broker (this should be changed...) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">allocationSize</td><td>The size of the buffer required by the associated producer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">brid</td><td>The broker ID. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_a8171e83c7af7bb817473733c536cc6f6_cgraph.png" border="0" usemap="#classisf_1_1Broker_a8171e83c7af7bb817473733c536cc6f6_cgraph" alt=""/></div>
<map name="classisf_1_1Broker_a8171e83c7af7bb817473733c536cc6f6_cgraph" id="classisf_1_1Broker_a8171e83c7af7bb817473733c536cc6f6_cgraph">
<area shape="rect" id="node2" href="classisf_1_1Broker.html#a27e61671de6730a9274372ab3f9836f8" title="Allocate the memory of the two broker&#39;s buffers. " alt="" coords="182,5,343,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a798861d4b3472273e961e199dcd62cd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">isf::Broker::~Broker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2"></td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classisf_1_1Broker.html" title="The Broker Class. ">Broker</a> Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a27e61671de6730a9274372ab3f9836f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void isf::Broker::doAllocation </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate the memory of the two broker's buffers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The size of the buffer's memory in bytes. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_a27e61671de6730a9274372ab3f9836f8_icgraph.png" border="0" usemap="#classisf_1_1Broker_a27e61671de6730a9274372ab3f9836f8_icgraph" alt=""/></div>
<map name="classisf_1_1Broker_a27e61671de6730a9274372ab3f9836f8_icgraph" id="classisf_1_1Broker_a27e61671de6730a9274372ab3f9836f8_icgraph">
<area shape="rect" id="node2" href="classisf_1_1Broker.html#a8171e83c7af7bb817473733c536cc6f6" title="Broker Constructor. " alt="" coords="216,5,344,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3d5258e46e29785d114b0f7f9b2963e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void isf::Broker::doReleaseBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decrement the notificationCounter by one. </p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_aa3d5258e46e29785d114b0f7f9b2963e_icgraph.png" border="0" usemap="#classisf_1_1Broker_aa3d5258e46e29785d114b0f7f9b2963e_icgraph" alt=""/></div>
<map name="classisf_1_1Broker_aa3d5258e46e29785d114b0f7f9b2963e_icgraph" id="classisf_1_1Broker_aa3d5258e46e29785d114b0f7f9b2963e_icgraph">
<area shape="rect" id="node2" href="classisf_1_1Broker.html#aae79fea929f37a567da7bb1897ea0a13" title="Add a Event in the broker&#39;s eventmanager which calls the void doReleaseBuffer() internal method..." alt="" coords="241,5,407,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0a340374545dda6cc005a1fd06c00722"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * isf::Broker::getConsumerBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the pointer pointing to the buffer instance accessible by the consumer for reading. </p>

</div>
</div>
<a class="anchor" id="a4341d8977b4c2d2ad34bf4fb6ce2ccb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * isf::Broker::getProducerBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the pointer pointing to the buffer instance accessible by the producer for writing. </p>

</div>
</div>
<a class="anchor" id="ac5f4602af66d94c23929fa8c3ec86ce2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void isf::Broker::notifyConsumers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call the consumers' public method "notify" when the swap have been executed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">step</td><td>The time step at which the data is provided. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_ac5f4602af66d94c23929fa8c3ec86ce2_icgraph.png" border="0" usemap="#classisf_1_1Broker_ac5f4602af66d94c23929fa8c3ec86ce2_icgraph" alt=""/></div>
<map name="classisf_1_1Broker_ac5f4602af66d94c23929fa8c3ec86ce2_icgraph" id="classisf_1_1Broker_ac5f4602af66d94c23929fa8c3ec86ce2_icgraph">
<area shape="rect" id="node2" href="classisf_1_1Broker.html#a2ffacd36660e79a915aa1abbd11246c7" title="Exchange the both swapping buffers&#39; pointers. " alt="" coords="243,5,405,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aae79fea929f37a567da7bb1897ea0a13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void isf::Broker::releaseBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a <a class="el" href="classisf_1_1Event.html" title="Event class. ">Event</a> in the broker's eventmanager which calls the void <a class="el" href="classisf_1_1Broker.html#aa3d5258e46e29785d114b0f7f9b2963e" title="Decrement the notificationCounter by one. ">doReleaseBuffer()</a> internal method. </p>
<p>This method is called by a consumer to notify the broker that it has finished to work in the comsumerBuffer. </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_aae79fea929f37a567da7bb1897ea0a13_cgraph.png" border="0" usemap="#classisf_1_1Broker_aae79fea929f37a567da7bb1897ea0a13_cgraph" alt=""/></div>
<map name="classisf_1_1Broker_aae79fea929f37a567da7bb1897ea0a13_cgraph" id="classisf_1_1Broker_aae79fea929f37a567da7bb1897ea0a13_cgraph">
<area shape="rect" id="node2" href="classisf_1_1Broker.html#aa3d5258e46e29785d114b0f7f9b2963e" title="Decrement the notificationCounter by one. " alt="" coords="221,5,408,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ffacd36660e79a915aa1abbd11246c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void isf::Broker::swapBuffers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>step</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Exchange the both swapping buffers' pointers. </p>
<p>This method is called by the associated producer when it has finished its data processing. To allow the swapping, the broker first checks that all the associated consumers have finished to use the previous traded data (via the notificationCounter variable). The broker may blocks the simulation thread here, if some consumers have not finished to read/process their data. Once the pointers have swapped, the broker notifies its associated consumers that newer are available for processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">step</td><td>The time step at which the data is provided </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classisf_1_1Broker_a2ffacd36660e79a915aa1abbd11246c7_cgraph.png" border="0" usemap="#classisf_1_1Broker_a2ffacd36660e79a915aa1abbd11246c7_cgraph" alt=""/></div>
<map name="classisf_1_1Broker_a2ffacd36660e79a915aa1abbd11246c7_cgraph" id="classisf_1_1Broker_a2ffacd36660e79a915aa1abbd11246c7_cgraph">
<area shape="rect" id="node2" href="classisf_1_1Event.html#abf6e977016ed2c47042602e5664e1a6b" title="Call the method specified in the event. " alt="" coords="245,5,377,32"/><area shape="rect" id="node3" href="classisf_1_1Broker.html#ac5f4602af66d94c23929fa8c3ec86ce2" title="Call the consumers&#39; public method &quot;notify&quot; when the swap have been executed. " alt="" coords="216,56,405,83"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="acbed060bef8fdcc2995df92145b4f543"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classisf_1_1BrokerConfig.html">BrokerConfig</a> isf::Broker::brokerConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is used to store the map between Consumers' pointers and their period of action. </p>

</div>
</div>
<a class="anchor" id="ad9cc2ed9f10d2c27d74938eca7ce11fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classisf_1_1ProducerFactory.html">ProducerFactory</a>* isf::Broker::brokerID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is used to store the ID of the broker. </p>
<p>The pointer of its associated producer's <a class="el" href="classisf_1_1ProducerFactory.html" title="ProducerFactory class. ">ProducerFactory</a> is used. </p>

</div>
</div>
<a class="anchor" id="ae035dc414c5afc31ef9f21b626540228"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* isf::Broker::consumerBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab3b14c66e7b6c15cd54e7028fa371094"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classisf_1_1EventManager.html">EventManager</a>&lt;<a class="el" href="classisf_1_1Broker.html">Broker</a>&gt;* isf::Broker::em</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is used to store the Events send by the consumer thread via the broker API. </p>
<p>These events are read by the broker thread (i.e. simulation thread). </p>

</div>
</div>
<a class="anchor" id="a514d54cba8913b93755206cc5cfbeb16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int isf::Broker::notificationCounter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Is used to store the current number of consumers that have not finished to process their data. </p>
<p>This value is set to be equal to the number of associated consumers before the broker notifies them, and, when it equals 0 again, the broker can swap its buffer. </p>

</div>
</div>
<a class="anchor" id="a5a1ab87eaab41d40a69940a46a904268"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* isf::Broker::producerBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>includes/<a class="el" href="broker_8hpp_source.html">broker.hpp</a></li>
<li>src/<a class="el" href="broker_8cpp.html">broker.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 18 2014 20:29:58 for Iterative Simulation Framework by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
